# Day 76

## 데이터 시각화란

- 수많은 데이터에서 유의미한 데이터를 찾아 시각화한다.
  - 형태를 통해 한 눈에 데이터를 확인하기 쉽다.
  - **D3.js**, Recharts, React-vis, ...

## 데이터 시각화 만들기

- 기획
  - 데이터 : 풍부하고 유용한 데이터 확보
  - 독자 : 누구에게 필요할지, 누가 흥미를 가질지 니즈 파악하기(신문의 구독층, 회사의 동료들)
  - 구성 : 데이터 or 분석에서 출발
- 좋은 데이터 시각화? - 익숙한 것을 쉽게 인지함, 필요하다면 부가 설명
  - 풍부하고 유용한 데이터를
  - 명료하게 보기 좋은 형식으로
  - 한 눈에 내용이 전달되는 구성
  - ex) 코로나 국내 감염 현황(네이버), 자바스크립트 만족도 순위

## 데이터 시각화를 구성하는 요소

- 데이터 측면

  - 데이터셋(테이블) : 차트에 사용된 모든 데이터
    - 데이터 변수 : 세로(열, 컬럼), 정량적 속성(연속형, 이산형)과 정성적 속성(순위형, 명목형)으로 구분

- 시각적 측면
  - 위치, 형태, 크기, 색, 굵기, 선의 유형 등
  - 데이터와 시각적 속성이 1:1로 대응해야 함 => 척도(scale)
    - 위치 스케일 : 좌표계 사용
    - 색상 스케일 : 정성적(유난히 튀는 색 없고 순서가 없이 구분), 순차적(색의 순서 부여, 값의 크기 차이 나타냄), 발산형(순차적 색상 스케일 2개 연결), 강조(다른 색상 스케일의 강조 버전)
  - [에시 링크](https://colorbrewer2.org/#type=sequential&scheme=BuGn&n=3)
- 그 외
  - 범례(legend), 말풍선(tooltip), 라벨(차트에 대한 부가 정보 텍스트로 보여줌)

## 시각화 데이터 종류

- 수량 데이터
  - 단일 범주 : 표, 막대 차트
  - 여러 범주 : 묶은 막대, 누적 막대, 멀티 차트
- 비율 데이터
  - 전체 데이터를 적절하게 분할
  - 파이 차트, 누적 막대 도표, 모자이크 도표, 트리맵
- 시계열&추세 데이터
  - 선을 사용한 차트
- 지리공간 데이터
  - 단계구분도(여러 지역의 정량적 데이터 구분), 카토그램
- 그 외

  - 평행 집합(Parallel set), Word cloud

## 효과적인 시각화를 위한 체크포인트

- 선형 스케일 차트는 0에서 시작
- 무분별한 색 사용은 혼란 야기 가능
- 색각 이상자 고려
  - [링크1](https://davidmathlogic.com/colorblind)
  - [링크2](https://color.adobe.com/ko/create/color-accessibility)
- 데이터의 맥락을 보여줄 제목을 활용
- 테두리와 격자 활용
- 3D는 하지 말자

## D3.js

- Data-Driven Document([공식 홈페이지](https://d3js.org/))
  - 데이터를 기반으로 DOM을 다루는 라이브러리
  - 다양한 데이터의 포맷 처리, 모듈 제공
  - HTML, SVG 웹 표준 기술 사용
  - 데이터와 DOM element 결합
  - 원리와 API를 이해하면 다양한 모양의 시각화 구현 가능
- D3.js와 SVG
  - 각각의 데이터 포인트를 SVG(circle, rect, ...)와 결합
  - 시각적인 형태와 위치 조절
  - 확대/축소에도 픽셀 깨짐 없음
- 단점
  - 분석 툴이 아님
  - Tableau나 Excel처럼 쉽고 빠르게 구현 하기는 힘듦

## 예제

- ex1
  - circle, ellipse, rect, polygon, line, path, text
- ex2
  - text+line(linecap)으로 차트 흉내내기, 나중에 쓰인 svg 요소가 맨 앞에 위치함, g 태그로 그룹화+클래스로 관리
    - g 태그의 attribute로 `transform="translate(200, 120)`, `transform=scale(1.2)` 등으로 위치나 크기 한꺼번에 변경 가능
- ex3
  - 막대 차트 만들기(2019년 TOP7 관객수 영화)
    1. 막대 만들기
    - rect 태그
    2. 데이터 넣기
    - 데이터가 많지 않기 때문에 인라인으로 직접 삽입
    3. 데이터 값 비율에 맞게 막대 너비 조절
       - 보여주고 싶은 막대 최대 길이 / 해당 데이터 값 = 비율, 각 막대의 데이터 값 \* 비율로 값 변환
       - 400 / 16264806
       - g로 묶고 `transform=scale(비율)`
    4. 라벨 추가
    5. 축 추가
       - 단위 설정(1626만), 숫자 끝자리 5/10(1650만), 포인트 개수 설정(3개, 0=0 / 550만=135.25 / 1100만=270.51 / 1650만=405.77)
    6. 스타일 추가
